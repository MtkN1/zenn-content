{
  "title": "Mermaind でシステム構成図を作ってみる",
  "closed": false,
  "archived": false,
  "created_at": "2023-02-20",
  "comments": [
    {
      "author": "mtkn1",
      "created_at": "2023-02-20",
      "body_markdown": "https://qiita.com/b-mente/items/b17275090176d63d1d69\n\n## サービスのサンプル\n\n```mermaid\nflowchart\n\n%%---グループの設定---\n\n%%Storage関連のグループ\nsubgraph GST[Storage関連]\n  ST1[(S3)]\n  ST2[(EBS)]\n  ST3[(EFS)]\nend\n\n%%Database関連のグループ\nsubgraph GDB[Database関連]\n  DB1[(RDS)]\n  DB2[(Redshift)]\n  DB3[(ElastiCacke)]\nend\n\n%%Compute関連のグループ\nsubgraph GCP[Compute関連]\n  CP1(EC2)\n  CP2(ECS)\n  CP3(Lambda)\nend\n\n%%Network関連のグループ\nsubgraph GNW[Network関連]\n  NW1{{ELB}}\n  NW2{{API Gateway}}\n  NW3{{Kinesis}}\nend\n\n%%外部要素のグループ\nsubgraph GOU[外部要素]\n  OU1[Users]\n  OU2[Server]\n  OU3[Client]\nend\n\n%%---スタイルの設定---\n\n%%外部要素のスタイル\nclassDef SOU fill:#aaa,color:#fff,stroke:#fff\nclass OU1,OU2,OU3 SOU\n\n%%Network関連のスタイル\nclassDef SNW fill:#84d,color:#fff,stroke:none\nclass NW1,NW2,NW3 SNW\n\n%%Compute関連のスタイル\nclassDef SCP fill:#e83,color:#fff,stroke:none\nclass CP1,CP2,CP3 SCP\n\n%%DB関連のスタイル\nclassDef SDB fill:#46d,color:#fff,stroke:#fff\nclass DB1,DB2,DB3 SDB\n\n%%Storage関連のスタイル\nclassDef SST fill:#493,color:#fff,stroke:#fff\nclass ST1,ST2,ST3 SST\n\n%%グループのスタイル\nclassDef SG fill:none,color:#666,stroke:#aaa\nclass GST,GDB,GCP,GNW,GOU SG\n```\n\n```\nflowchart\n\n%%---グループの設定---\n\n%%Storage関連のグループ\nsubgraph GST[Storage関連]\n  ST1[(S3)]\n  ST2[(EBS)]\n  ST3[(EFS)]\nend\n\n%%Database関連のグループ\nsubgraph GDB[Database関連]\n  DB1[(RDS)]\n  DB2[(Redshift)]\n  DB3[(ElastiCacke)]\nend\n\n%%Compute関連のグループ\nsubgraph GCP[Compute関連]\n  CP1(EC2)\n  CP2(ECS)\n  CP3(Lambda)\nend\n\n%%Network関連のグループ\nsubgraph GNW[Network関連]\n  NW1{{ELB}}\n  NW2{{API Gateway}}\n  NW3{{Kinesis}}\nend\n\n%%外部要素のグループ\nsubgraph GOU[外部要素]\n  OU1[Users]\n  OU2[Server]\n  OU3[Client]\nend\n\n%%---スタイルの設定---\n\n%%外部要素のスタイル\nclassDef SOU fill:#aaa,color:#fff,stroke:#fff\nclass OU1,OU2,OU3 SOU\n\n%%Network関連のスタイル\nclassDef SNW fill:#84d,color:#fff,stroke:none\nclass NW1,NW2,NW3 SNW\n\n%%Compute関連のスタイル\nclassDef SCP fill:#e83,color:#fff,stroke:none\nclass CP1,CP2,CP3 SCP\n\n%%DB関連のスタイル\nclassDef SDB fill:#46d,color:#fff,stroke:#fff\nclass DB1,DB2,DB3 SDB\n\n%%Storage関連のスタイル\nclassDef SST fill:#493,color:#fff,stroke:#fff\nclass ST1,ST2,ST3 SST\n\n%%グループのスタイル\nclassDef SG fill:none,color:#666,stroke:#aaa\nclass GST,GDB,GCP,GNW,GOU SG\n```\n\n## AWS構成図のサンプル\n\n```mermaid\nflowchart LR\n\n%%外部要素のUser\nOU1[User]\n\n%%グループとサービス\nsubgraph GC[AWS]\n  subgraph GV[vpc-sc1]\n    subgraph GS1[subnet-1]\n      NW1{{\"ELB<br>web1\"}}\n    end\n    subgraph GS2[subnet-2]\n      CP1(\"EC2<br>web1\")\n    end\n    DB1[(\"RDS<br>db1\")]\n  end\n  ST1[(\"S3<br>xx.com\")]\nend\n\n%%サービス同士の関係\nOU1 --> NW1\nNW1 --> CP1\nCP1 --> DB1\nDB1 -.-> ST1\n\n%%グループのスタイル\nclassDef SGC fill:none,color:#345,stroke:#345\nclass GC SGC\n\nclassDef SGV fill:none,color:#0a0,stroke:#0a0\nclass GV SGV\n\nclassDef SGPrS fill:#def,color:#07b,stroke:none\nclass GS2 SGPrS\n\nclassDef SGPuS fill:#efe,color:#092,stroke:none\nclass GS1 SGPuS\n\n%%サービスのスタイル\nclassDef SOU fill:#aaa,color:#fff,stroke:#fff\nclass OU1 SOU\n\nclassDef SNW fill:#84d,color:#fff,stroke:none\nclass NW1 SNW\n\nclassDef SCP fill:#e83,color:#fff,stroke:none\nclass CP1 SCP\n\nclassDef SDB fill:#46d,color:#fff,stroke:#fff\nclass DB1 SDB\n\nclassDef SST fill:#493,color:#fff,stroke:#fff\nclass ST1 SST\n```\n\n```\nflowchart LR\n\n%%外部要素のUser\nOU1[User]\n\n%%グループとサービス\nsubgraph GC[AWS]\n  subgraph GV[vpc-sc1]\n    subgraph GS1[subnet-1]\n      NW1{{\"ELB<br>web1\"}}\n    end\n    subgraph GS2[subnet-2]\n      CP1(\"EC2<br>web1\")\n    end\n    DB1[(\"RDS<br>db1\")]\n  end\n  ST1[(\"S3<br>xx.com\")]\nend\n\n%%サービス同士の関係\nOU1 --> NW1\nNW1 --> CP1\nCP1 --> DB1\nDB1 -.-> ST1\n\n%%グループのスタイル\nclassDef SGC fill:none,color:#345,stroke:#345\nclass GC SGC\n\nclassDef SGV fill:none,color:#0a0,stroke:#0a0\nclass GV SGV\n\nclassDef SGPrS fill:#def,color:#07b,stroke:none\nclass GS2 SGPrS\n\nclassDef SGPuS fill:#efe,color:#092,stroke:none\nclass GS1 SGPuS\n\n%%サービスのスタイル\nclassDef SOU fill:#aaa,color:#fff,stroke:#fff\nclass OU1 SOU\n\nclassDef SNW fill:#84d,color:#fff,stroke:none\nclass NW1 SNW\n\nclassDef SCP fill:#e83,color:#fff,stroke:none\nclass CP1 SCP\n\nclassDef SDB fill:#46d,color:#fff,stroke:#fff\nclass DB1 SDB\n\nclassDef SST fill:#493,color:#fff,stroke:#fff\nclass ST1 SST\n```\n\n## EC2の配置図\n\n```mermaid\n%%{init:{'themeVariables':{'lineColor':'#000ff'}}}%%\nflowchart TB\nsubgraph GV1[vpc-xxx]\n subgraph GA1_1[ap-northeast-1a]\n  subgraph GS1_1_1[subnet-xxx]\n   CP1_1_1_1(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP1_1_1_2(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP1_1_1_1---CP1_1_1_2\n  end\n end\nend\nGV1---GV2\nsubgraph GV2[vpc-xxx]\n subgraph GA2_1[ap-northeast-1a]\n  subgraph GS2_1_1[subnet-xxx]\n   CP2_1_1_1(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP2_1_1_2(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP2_1_1_1---CP2_1_1_2\n  end\n  subgraph GS2_1_2[subnet-xxx]\n   CP2_1_2_1(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP2_1_2_2(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP2_1_2_3(tag:xxx<br>id:i-xxx<br>ip:xxx)\n  end\n end\nend\nclassDef SGV fill:none,color:#0a0,stroke:#0a0\nclassDef SGA fill:none,color:#59d,stroke:#59d,stroke-width:1px,stroke-dasharray:8\nclassDef SGS fill:#def,color:#07b,stroke:none\nclassDef SCP fill:#e83,color:#fff,stroke:none\nclass GV1,GV2 SGV\nclass GS1_1_1,GS2_1_1,GS2_1_2 SGS\nclass GA1_1,GA2_1 SGA\nclass CP1_1_1_1,CP1_1_1_2,CP2_1_1_1,CP2_1_1_2,CP2_1_2_1,CP2_1_2_2,CP2_1_2_3 SCP\n```\n```\n%%{init:{'themeVariables':{'lineColor':'#000ff'}}}%%\nflowchart TB\nsubgraph GV1[vpc-xxx]\n subgraph GA1_1[ap-northeast-1a]\n  subgraph GS1_1_1[subnet-xxx]\n   CP1_1_1_1(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP1_1_1_2(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP1_1_1_1---CP1_1_1_2\n  end\n end\nend\nGV1---GV2\nsubgraph GV2[vpc-xxx]\n subgraph GA2_1[ap-northeast-1a]\n  subgraph GS2_1_1[subnet-xxx]\n   CP2_1_1_1(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP2_1_1_2(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP2_1_1_1---CP2_1_1_2\n  end\n  subgraph GS2_1_2[subnet-xxx]\n   CP2_1_2_1(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP2_1_2_2(tag:xxx<br>id:i-xxx<br>ip:xxx)\n   CP2_1_2_3(tag:xxx<br>id:i-xxx<br>ip:xxx)\n  end\n end\nend\nclassDef SGV fill:none,color:#0a0,stroke:#0a0\nclassDef SGA fill:none,color:#59d,stroke:#59d,stroke-width:1px,stroke-dasharray:8\nclassDef SGS fill:#def,color:#07b,stroke:none\nclassDef SCP fill:#e83,color:#fff,stroke:none\nclass GV1,GV2 SGV\nclass GS1_1_1,GS2_1_1,GS2_1_2 SGS\nclass GA1_1,GA2_1 SGA\nclass CP1_1_1_1,CP1_1_1_2,CP2_1_1_1,CP2_1_1_2,CP2_1_2_1,CP2_1_2_2,CP2_1_2_3 SCP\n```",
      "body_updated_at": "2023-02-20"
    }
  ]
}